<Window x:Class="SIAP.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SIAP Foundation" Height="700" Width="1100"
        Background="{DynamicResource TokenBrushBackgroundPrimary}"
        Foreground="{DynamicResource TokenBrushTextPrimary}"
        FontFamily="{DynamicResource TokenFontPrimary}">
  <Grid Margin="{DynamicResource TokenThicknessContainer}" Background="{DynamicResource TokenBrushBackgroundPrimary}">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Border Style="{StaticResource SIAP.Card}"
            Margin="{DynamicResource TokenThicknessRowGap}">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="2*" />
          <ColumnDefinition Width="2*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <StackPanel>
          <TextBlock Text="Project" Style="{StaticResource SIAP.SectionHeader}" />
          <TextBlock x:Name="ProjectNameText" Text="(none)" />
          <TextBlock x:Name="ProjectPathText" FontSize="{DynamicResource TokenFontSizeSmall}" Text=" " />
        </StackPanel>

        <StackPanel Grid.Column="1">
          <TextBlock Text="Filter" Style="{StaticResource SIAP.SectionHeader}" />
          <StackPanel Orientation="Horizontal" Margin="{DynamicResource TokenThicknessTopMicro}">
            <TextBox x:Name="FilterTextBox" Width="260" />
            <Button Content="Clear"
                    Style="{StaticResource SIAP.SecondaryButton}"
                    Click="OnClearFilterClicked" />
          </StackPanel>
          <TextBlock x:Name="SelectionSummaryText"
                     Margin="{DynamicResource TokenThicknessTopSmall}"
                     Text="Selected: 0 items" />
        </StackPanel>

        <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Top">
          <Button Content="Select All"
                  Style="{StaticResource SIAP.SecondaryButton}"
                  Click="OnSelectAllClicked" />
          <Button Content="Clear"
                  Style="{StaticResource SIAP.SecondaryButton}"
                  Click="OnClearSelectionClicked" />
          <Button Content="Rescan"
                  Style="{StaticResource SIAP.PrimaryButton}"
                  Click="OnRescanClicked" />
        </StackPanel>
      </Grid>
    </Border>

    <Grid Grid.Row="1">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="2*" MinWidth="{DynamicResource TokenMinPaneWidth}" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" MinWidth="{DynamicResource TokenMinPaneWidth}" />
      </Grid.ColumnDefinitions>

      <GroupBox Header="Explorer"
                Margin="{DynamicResource TokenThicknessPanelMargin}"
                Style="{StaticResource SIAP.Panel}">
        <TreeView x:Name="ExplorerTree"
                  ItemsSource="{Binding RootNodes}">
          <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
              <StackPanel Orientation="Horizontal">
                <CheckBox IsThreeState="True"
                          IsChecked="{Binding IsChecked, Mode=TwoWay}" />
                <TextBlock Text=" " Width="{DynamicResource TokenSpacingMicro}" />
                <TextBlock x:Name="NodeIcon" Text="F" Foreground="{DynamicResource TokenBrushAccentPrimary}" />
                <TextBlock Text=" " Width="{DynamicResource TokenSpacingMicro}" />
                <TextBlock Text="{Binding Name}" />
              </StackPanel>
              <HierarchicalDataTemplate.Triggers>
                <DataTrigger Binding="{Binding IsFolder}" Value="True">
                  <Setter TargetName="NodeIcon" Property="Text" Value="ðŸ“" />
                </DataTrigger>
                <DataTrigger Binding="{Binding IsFolder}" Value="False">
                  <Setter TargetName="NodeIcon" Property="Text" Value="ðŸ“„" />
                </DataTrigger>
              </HierarchicalDataTemplate.Triggers>
            </HierarchicalDataTemplate>
          </TreeView.ItemTemplate>
        </TreeView>
      </GroupBox>

      <GridSplitter Grid.Column="1"
                    Style="{StaticResource SIAP.Splitter}" />

      <GroupBox Grid.Column="2" Header="Log" Style="{StaticResource SIAP.Panel}">
        <TextBox x:Name="LogTextBox"
                 IsReadOnly="True"
                 TextWrapping="Wrap"
                 VerticalScrollBarVisibility="Auto" />
      </GroupBox>
    </Grid>

    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="{DynamicResource TokenThicknessTopStandard}">
      <Button x:Name="OpenProjectButton"
              Style="{StaticResource SIAP.PrimaryButton}"
              Content="Open Project"
              Width="140"
              Click="OnOpenProjectClicked" />
      <Button x:Name="GenerateExportButton"
              Style="{StaticResource SIAP.SecondaryButton}"
              Content="Generate Export"
              Width="160"
              IsEnabled="False"
              Click="OnGenerateExportClicked" />
      <TextBlock Text="File Count:"
                 Style="{StaticResource SIAP.SectionHeader}"
                 Margin="{DynamicResource TokenThicknessFooterLabel}" />
      <TextBlock x:Name="FileCountText"
                 Margin="{DynamicResource TokenThicknessFooterValue}"
                 Text="0" />
      <TextBlock Text="Total Size (bytes):"
                 Style="{StaticResource SIAP.SectionHeader}"
                 Margin="{DynamicResource TokenThicknessFooterLabelTight}" />
      <TextBlock x:Name="TotalSizeText"
                 Margin="{DynamicResource TokenThicknessFooterValueTight}"
                 Text="0" />
    </StackPanel>
  </Grid>
</Window>
