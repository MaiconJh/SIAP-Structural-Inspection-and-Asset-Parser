<Window x:Class="SIAP.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SIAP Foundation" Height="700" Width="1100"
        Background="#1E1E1E"
        Foreground="#D4D4D4">
  <Window.Resources>
    <Style TargetType="Button">
      <Setter Property="Background" Value="#007ACC" />
      <Setter Property="Foreground" Value="#FFFFFF" />
      <Setter Property="BorderBrush" Value="#3C3C3C" />
      <Setter Property="Padding" Value="8,4" />
      <Setter Property="Margin" Value="0,0,8,0" />
    </Style>
    <Style TargetType="TextBox">
      <Setter Property="Background" Value="#252526" />
      <Setter Property="Foreground" Value="#D4D4D4" />
      <Setter Property="BorderBrush" Value="#3C3C3C" />
    </Style>
    <Style TargetType="TextBlock">
      <Setter Property="Foreground" Value="#D4D4D4" />
    </Style>
    <Style TargetType="TreeView">
      <Setter Property="Background" Value="#252526" />
      <Setter Property="Foreground" Value="#D4D4D4" />
      <Setter Property="BorderBrush" Value="#3C3C3C" />
    </Style>
    <Style TargetType="GroupBox">
      <Setter Property="Background" Value="#252526" />
      <Setter Property="BorderBrush" Value="#3C3C3C" />
      <Setter Property="Foreground" Value="#D4D4D4" />
    </Style>
  </Window.Resources>

  <Grid Margin="16" Background="#1E1E1E">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Border Background="#252526" BorderBrush="#3C3C3C" BorderThickness="1" Padding="12" Margin="0,0,0,12">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="2*" />
          <ColumnDefinition Width="2*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <StackPanel>
          <TextBlock Text="Project" FontWeight="SemiBold" />
          <TextBlock x:Name="ProjectNameText" Text="(none)" />
          <TextBlock x:Name="ProjectPathText" FontSize="11" Text=" " />
        </StackPanel>

        <StackPanel Grid.Column="1">
          <TextBlock Text="Filter" FontWeight="SemiBold" />
          <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
            <TextBox x:Name="FilterTextBox" Width="260" />
            <Button Content="Clear" Click="OnClearFilterClicked" />
          </StackPanel>
          <TextBlock x:Name="SelectionSummaryText" Margin="0,8,0,0" Text="Selected: 0 items" />
        </StackPanel>

        <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Top">
          <Button Content="Select All" Click="OnSelectAllClicked" />
          <Button Content="Clear" Click="OnClearSelectionClicked" />
          <Button Content="Rescan" Click="OnRescanClicked" />
        </StackPanel>
      </Grid>
    </Border>

    <Grid Grid.Row="1">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="2*" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>

      <GroupBox Header="Explorer" Margin="0,0,12,0">
        <TreeView x:Name="ExplorerTree"
                  ItemsSource="{Binding RootNodes}">
          <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
              <StackPanel Orientation="Horizontal">
                <CheckBox IsThreeState="True"
                          IsChecked="{Binding IsChecked, Mode=TwoWay}" />
                <TextBlock Text=" " Width="6" />
                <TextBlock x:Name="NodeIcon" Text="F" Foreground="#007ACC" />
                <TextBlock Text=" " Width="6" />
                <TextBlock Text="{Binding Name}" />
              </StackPanel>
              <HierarchicalDataTemplate.Triggers>
                <DataTrigger Binding="{Binding IsFolder}" Value="True">
                  <Setter TargetName="NodeIcon" Property="Text" Value="ðŸ“" />
                </DataTrigger>
                <DataTrigger Binding="{Binding IsFolder}" Value="False">
                  <Setter TargetName="NodeIcon" Property="Text" Value="ðŸ“„" />
                </DataTrigger>
              </HierarchicalDataTemplate.Triggers>
            </HierarchicalDataTemplate>
          </TreeView.ItemTemplate>
        </TreeView>
      </GroupBox>

      <GroupBox Grid.Column="1" Header="Log">
        <TextBox x:Name="LogTextBox"
                 IsReadOnly="True"
                 TextWrapping="Wrap"
                 VerticalScrollBarVisibility="Auto" />
      </GroupBox>
    </Grid>

    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,12,0,0">
      <Button x:Name="OpenProjectButton"
              Content="Open Project"
              Width="140"
              Click="OnOpenProjectClicked" />
      <Button x:Name="GenerateExportButton"
              Content="Generate Export"
              Width="160"
              IsEnabled="False"
              Click="OnGenerateExportClicked" />
      <TextBlock Text="File Count:" FontWeight="SemiBold" Margin="16,4,0,0" />
      <TextBlock x:Name="FileCountText" Margin="6,4,16,0" Text="0" />
      <TextBlock Text="Total Size (bytes):" FontWeight="SemiBold" Margin="0,4,0,0" />
      <TextBlock x:Name="TotalSizeText" Margin="6,4,0,0" Text="0" />
    </StackPanel>
  </Grid>
</Window>
